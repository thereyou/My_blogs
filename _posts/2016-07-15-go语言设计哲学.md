---
layout: post
title: go语言设计哲学(转)
category: 技术
---



#世界是并行的----先不说宇宙，就整个地球来说，世界万物都是并行发生的；天生对并发支持良好的go语言更容易描述并行的世界；

世界是由物质组合构成的---微观世界：由小的粒子组合成大的粒子；宏观世界：由小的物体组合成大的物体；
继承只能描述现实世界的一小部分，使用继承是不全面的；go的设计选择的是组合，这个和现实世界比较吻合的设计，表现力更强；

世界是标准化的---随着生产力的发展，社会分工越来与详细，越来越多行业有了国际标准，任何一个国家的、任何一个公司只要按照这个标准生产器件，就能装配到一台机器上；IBM/PC就是硬件模块化和接口化一个最成功的例证；
软件也可如此，go的接口是duck模型，面向接口编程，而不需要显示的声明，将语言能做的事情交给语言做；

正交性--几何上的正交指的是两个向量垂直关系，一个向量在另一个向量方向的投影是一个点；
现实中的正交是指多个因素，一个发生变化，不会影响其他的因素；在不减少表现力的情况下，正交是保持事物稳定性和简单性的最好设计；
go很好的遵循了这个规律，go的多个特性之间都是正交的：goroutine,接口,组合,类型系统等；
举一个典型的正交设计例子：比如客户嫌雨伞太小，单纯的加长伞杆是不行的，这会增加雨伞的长度；最后计出折叠式的雨伞；这种设计能保证雨伞大小和雨伞长度满足正交关系，当然这会增加雨伞生产的复杂性）
把复杂性留给厂家，把便利性留给客户；对于编程语言：尽量把复杂性留给语言实现者和编译器，把简单性留给语言使用者，这才是一种好的语言；

少即是多---没有万能的语言，换句话说一门语言不可能包含所有的特性；想囊括所有特性的语言一定是非常的复杂（C++);
保持简单性的方法就是：每种特性仅提供一种方法，减少重复、冗余，试想一下，如果汽车有多个刹车板，你会感觉更安全，更便利吗？
只提供一种方法做事情，把事情做到极致，这就是go的原则，解放程序员，不要给他提供很多雷同的功能和语句，这不会使问题简单，只会加重程序员的心智负担


二八定律---在编程语言中描述就：百分之八十的代码仅仅使用到百分之二十的语言特性，增加语言特性，并不能保证开发效率的提升，原因是它会增加复杂性，导致更容易犯错；
有些复杂的编程问题其实可以通过库的形式来辅助支持；大部分

异常与错误---所谓异常就是没有预料到的非期望的事情发生了，所谓错误就是预料到的非期望的事情发生了；go语言把两种情况终于给分清楚了；什么是防御性编程，怎么保持程序的健壮性；
每次调用都检查error确实让代码挺不美观的，个人认为为了健壮性，进行防御性的编程也是可以接收的；通过一定的技巧是可以避免错误代码冗余性；

论述完普世定律后，我来总结一下GO语言的哲学：
1.面向接口编程
2.使用组合的编程
3.正交性：语言设计的正交性，保证语言的稳定性和简单性
4.少即是多：有且仅有一种方法把事情做好做对
5.并发语言层面支持：并发更好利用多核，有更强的表现力来模拟真实世界
6.开放性：开源，语言的实现对程序员不是个黑盒子，任何想了解语言实现的人都可以参与进来

go 没有像JAVA一样，宗教式的完全面向对象设计；完全面向对象设计就是一刀切的宗教式的设计，但其并不能很好的表述这个世界，这就导致其表现力不足，最后通过设计模式和面向切面等设计技巧来弥补语言方面的缺陷；go是面向工程的实用主义者，其糅合了面向对象的设计，函数式设计和过程式设计的优点；原来通过各种设计模式的设计通过函数、接口、组合等简单方式就搞定了；go有更多胶水的东西比如：接口，函数，闭包等等，可以轻松的的把模块衔接和驱动起来； JAVA就好比：手里握着是锤子，看什么都是钉子，什么都是类的对象，这个和现实世界不符，类表示单个事物还可以，一旦表示多个事物及其交互，其表现力也就会遇到各种挑战。
      是时候该转变观念了，不要动不动就提面向对象设计，动不动就提设计模式（特指某些招聘伪专家）；编程的世界是多样的，编程思想和范式是丰富多彩的，不要再沿着错误的路线继续前进了，拥抱go吧。
